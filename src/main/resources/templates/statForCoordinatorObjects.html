<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex">
  <meta name="X-CSRF-TOKEN" content="28469f9ac2ad73ed38f24fb238bf6b3e" /><title>Quality Work</title>
  <link rel="icon" href="/assets/images/quality-work-icon-01.svg">
  <link rel="apple-touch-icon" href="/assets/images/quality-work-icon-01.svg">
  <base href="https://e-quality.work">
  <link href="/assets/uikit/css/uikit.min.css" type="text/css" rel="stylesheet" />
  <link href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="" rel="stylesheet"/>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
  <link href="/assets/style/style.css?1687347920" type="text/css" rel="stylesheet" />
  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/uikit/js/uikit.min.js"></script>
  <script src="/assets/uikit/js/uikit-icons.min.js"></script>
  <script src="/assets/js/inputmask.min.js"></script>
  <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>
  <script src="/assets/js/app.js"></script>
</head><body>
<nav id="nav" class="nav-crm close">
  <ul>
    <li class="logo-container"><a href="https://e-quality-work.eu/index" class="logo-text">
      <span>Quality Work</span>In the right place at the right time        </a></li>
    <li class="divider">Меню</li>
    <li><a href="https://e-quality-work.eu/panel/coordinator" class="icon icon-dashboard">Стартова панель</a></li>
    <li><a href="https://e-quality-work.eu/calendar/coordinator" class=" icon icon-objects">Календар</a></li>
    <li><a href="https://e-quality-work.eu/users/byCoordinator" class="active icon icon-users"><i class="fa-solid fa-fire"></i><span>Працівники</span></a></li>
    <li><a href="https://e-quality-work.eu/stat/coordinator" class=" icon icon-stat">Статистика</a></li>
  </ul>
  <ul class="nav-crm-bottom">
    <li class="lang uk-hidden@l">
      <a href="https://e-quality-work.eu/" class="active">Українська</a>
      <a href="https://e-quality-work.eu/" class="">Polski</a>
    </li>
    <li class="profile">
      <a href="https://e-quality-work.eu/profile">
        <img class="profile-image" src="assets/upload/avatar/avatar.png">
        <div><p th:text="${loggedUser.firstName}"><br><p th:text="${loggedUser.lastName}"></div>
      </a>
      <div class="profile-number"><p th:text="${loggedUser.id}"></div>
    </li>
    <li><a href="https://e-quality-work.eu/logout" class="icon icon-logout">Вийти</a></li>
  </ul>
  <a href="#" data-uk-toggle="target: #nav; cls: close" class="nav-crm-close uk-hidden@l"><span data-uk-icon="icon:close;ratio:1"></span></a>
</nav>
<header class="header-crm">
  <div data-uk-grid class="uk-grid-small">
    <div class="uk-width-auto uk-hidden@l">
      <a href="/" class="logo logo-icon"></a>
    </div>
    <div class="uk-width-auto uk-flex uk-flex-middle uk-hidden@l">
      <a href="#" data-uk-toggle="target: #nav; cls: close" class=""><span data-uk-icon="icon:menu;ratio:1.2"></span></a>
    </div>
    <div class="uk-width-expand uk-flex uk-flex-middle">
      <div class="header-title">Статистика</div>
    </div>
    <div class="uk-width-auto uk-flex uk-flex-middle uk-visible@m">
      <ul class="lang-ul">
        <li><a href="https://e-quality-work.eu/" class="active">Українська</a></li>
        <li><a href="https://e-quality-work.eu/" class="">Polski</a></li>
      </ul>
    </div>
  </div>
</header>
<main class="main-crm">
  <div data-uk-grid class="uk-grid-small">
    <div class="uk-width-1-1">
      <div data-uk-grid class="uk-grid-small">
        <div class="uk-width-auto">
      <div class="">
        <a href="https://e-quality-work.eu/stat/coordinator" class="uk-button uk-button-small">Робочі дні</a>
      </div>
    </div>
      <div class="uk-width-auto">
        <div class="">
          <a href="https://e-quality-work.eu/stat/coordinator/passedDays" class="uk-button uk-button-small">Пропуски</a>
        </div>
      </div>
      <div class="uk-width-auto">
        <div class="">
          <a href="https://e-quality-work.eu/stat/coordinator/objects" class="uk-button uk-button-small">Об'єкти</a>
        </div>
      </div>
    </div>
    </div>
    <div class="uk-width-expand"><h3>Статистика відпрацьованих годин</h3></div>
    <div class="uk-width-auto@s">
      <select name="object" class="uk-select uk-width-1-1">
        <option>не зазначено</option>
        <option  th:each="object : ${objects}" th:value="${object.name}"><p th:text="${object.name}"></option>
      </select>
      <a th:href="'https://e-quality-work.eu/excel/object/byCoordinator/' + ${objects.get(0).id} + '/' + ${dates.get(0)}" target="_blank" class="uk-button uk-button-green uk-button-small">Експорт в Excel Месяц</a>
    </div>
    <div class="uk-width-1-1">
      <div data-uk-grid class="uk-grid-small uk-flex">
        <div class="uk-width-auto">
          <a href="/"><span data-uk-icon="icon:arrow-left" class=""></span></a>
        </div>
        <div class="uk-width-auto">
          <b><p th:text="${dates.get(0).dayOfMonth + dates.get(0).month.toString() + ' - ' + dates.get(dates.size()-1).dayOfMonth + dates.get(dates.size()-1).month.toString()}"></b>
        </div>
        <div class="uk-width-auto uk-flex-last@m">
          <a href="/"><span data-uk-icon="icon:arrow-right" class=""></span></a>
        </div>
      </div>
    </div>
    <div class="uk-width-1-1">
      <table class="uk-table uk-table-xsmall uk-table-divider uk-table-middle table-border table-responsive table-responsive-float">
        <thead>
        <tr>
          <th>Працівник</th>
          <th th:each="date : ${dates}" th:text="${date}"></th>
          <th>Разом</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${users}">
          <td data-th="Працівник" class="uk-text-bold">
            <div class="right">
              <a th:href="@{https://e-quality-work.eu/stat/{userId}(userId = ${user.id})}">
                <p th:text="${user.firstName}"></p>
                <p th:text="${user.lastName}"></p>
              </a>
            </div>
          </td>
          <td th:each="date : ${dates}" class="">
            <div class="right" th:with="workDetails=${userWorkDetailsService.getByUserBetweenTime(user, date.atTime(0, 0), date.atTime(23, 59))}">
              <span th:if="${workDetails != null}">
                <span th:each="workDetail : ${workDetails}">
                    <span th:if="${workDetail.finishDateTime.minusHours(workDetail.startDateTime.hour).hour==0}">
                      <span>-</span>
                    </span>
                  <span th:if="${workDetail.isMissed == true}">
                    <span>-</span>
                  </span>
                  <span th:if="${workDetail.isMissed == false}">
                    <span th:if="${workDetail.finishDateTime.minusHours(workDetail.startDateTime.hour).hour!=0}">
                      <span th:text="${workDetail.finishDateTime.minusHours(workDetail.startDateTime.hour).hour + ' год ' + workDetail.finishDateTime.minusMinutes(workDetail.startDateTime.minute).minute + ' хв '}"></span>
                    </span>
                  </span>
                </span>
              </span>
              <span th:unless="${workDetails != null}">
                <span>-</span>
              </span>
            </div>
          </td>
          <td data-th="Разом" class="">
            <div class="right">
            <span th:if="${workDetails != null}">
              <span th:text="${userWorkDetailsService.getTotalHoursByUserBetween(user, dates.get(0), dates.get(dates.size()-1))}"></span>
              <span th:text="год"></span>
            </span>
            </div>
          </td>
        </tr>
        <tr class="tr-grey">
          <td colspan="8" class="uk-text-bold uk-text-right uk-visible@m">Разом</td>
          <td data-th="Разом">
            <div class="right">
              <span>0 год 00 хв</span>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
    <div class="uk-width-1-1">
      <h3>Загальна статистика</h3>
    </div>
    <div class="uk-width-1-1">
      <table class="uk-table uk-table-xsmall uk-table-divider uk-table-middle table-border">
        <tr>
          <td>Координаторів</td>
          <td></td>
        </tr>
        <tr>
          <td>Працівників</td>
          <td></td>
        </tr>
      </table>
    </div>
    <div class="uk-width-1-1" hidden>
    </div>
  </div>
</main>
<footer class="footer-crm">
  2023 © Quality Work — In the right place At the right time</footer>
</body>
</html>