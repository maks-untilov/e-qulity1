<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <meta name="X-CSRF-TOKEN" content="82171889f75eb82d718ff2357a5834d6" />
    <title>Quality Work</title>
    <link rel="icon" href="/static/images/quality-work-01.svg">
    <link rel="apple-touch-icon" href="/static/images/quality-work-01.svg">
    <link href="/static/css/uikit.min.css" type="text/css" rel="stylesheet" />
    <link href="/static/css/style.css" type="text/css" rel="stylesheet" />
    <script src="jquery.min.js"></script>
    <script src="uikit.min.js"></script>
    <script src="uikit-icons.min.js"></script>
    <script src="inputmask.min.js"></script>
    <script src="app.js"></script>
</head>
<body>
<nav id="nav" class="nav-crm close">
    <ul>
        <li class="logo-container"><a href="http://localhost:8080/panel/worker" class="logo-text">
            <span>Quality Work</span>In the right place at the right time        </a></li>
        <li class="divider">Menu</li>
        <li><a href="http://localhost:8080/panel/worker" class="active icon icon-dashboard">Стартова панель</a></li>
        <li><a href="http://localhost:8080/calendar" class=" icon icon-objects">Календар</a></li>
        <li><a th:href="@{http://localhost:8080/stat/{userId}(userId = ${loggedUser.id})}" class=" icon icon-stat">Статистика</a></li>
    </ul>
    <ul class="nav-crm-bottom">
        <li class="lang uk-hidden@l">
            <a href="https://e-quality.work/uk/crm/calendar" class="active">Українська</a>
            <a href="https://e-quality.work/pl/crm/calendar" class="">Polski</a>
        </li>
        <li class="profile">
            <a href="http://localhost:8080/profile">
                <img class="profile-image" src="static/images/avatar.png">
                <div><p th:text="${loggedUser.firstName + ' ' + loggedUser.lastName}"></div>
            </a>
            <div class="profile-number"><p th:text="${loggedUser.id}"></div>
        </li>
        <li><a href="/logout" class="icon icon-logout">Вийти</a></li>
    </ul>
    <a href="#" data-uk-toggle="target: #nav; cls: close" class="nav-crm-close uk-hidden@l"><span data-uk-icon="icon:close;ratio:1"></span></a>
</nav>
<header class="header-crm">
    <div data-uk-grid class="uk-grid-small">
        <div class="uk-width-auto uk-hidden@l">
            <a href="http://localhost:8080/panel/worker" class="logo logo-icon"></a>
        </div>
        <div class="uk-width-auto uk-flex uk-flex-middle uk-hidden@l">
            <a href="#" data-uk-toggle="target: #nav; cls: close" class=""><span data-uk-icon="icon:menu;ratio:1.2"></span></a>
        </div>
        <div class="uk-width-expand uk-flex uk-flex-middle">
            <div class="header-title">Календар</div>
        </div>
        <div class="uk-width-auto uk-flex uk-flex-middle uk-visible@m">
            <ul class="lang-ul">
                <li><a href="https://e-quality.work/uk/crm/calendar" class="active">Українська</a></li>
                <li><a href="https://e-quality.work/pl/crm/calendar" class="">Polski</a></li>
            </ul>
        </div>
    </div>
</header>
<br>
<main class="main-crm">
    <div data-uk-grid class="uk-grid-small">
        <div class="uk-width-1-1">
            <ul class="button-ul">
                <li class=""><a href="http://localhost:8080/calendar/prev">Попередній</a></li>
                <li class="active"><a href="http://localhost:8080/calendar">Поточний</a></li>
                <li class=""><a href="http://localhost:8080/calendar/next">Наступний</a></li>
            </ul>
        </div>
        <div class="uk-width-1-1">
            <h2>Поточний тиждень</h2>
        </div>
        <div class="uk-width-1-1">
            <ul class="calendar">
                <li class="calendar-close" th:each="date : ${dates}">
                    <div class="calendar-padding">
                        <div data-uk-grid class="uk-grid-small">
                            <div class="uk-width-auto uk-flex uk-flex-middle">
                                <p class="date"><p th:text="${date.dayOfWeek.toString() + ' ' + date.dayOfMonth + ' ' + date.month.toString()}"></p>
                            </div>
                            <div class="uk-width-auto uk-flex uk-flex-middle">
                                <p class="zmina zmina-0">
                                    <span th:if="${userWorkDetailsService.getByUserBetweenTime(loggedUser, date.atTime(0, 0), date.atTime(23, 59)) == null}">
                                                <p class="zmina zmina-0"> Не Працюю </p>
                                            </span>
                                    <span th:if="${userWorkDetailsService.getByUserBetweenTime(loggedUser, date.atTime(0, 0), date.atTime(23, 59)) != null}">
                                            <p th:text="${userWorkDetailsService.getByUserBetweenTime(loggedUser, date.atTime(0, 0), date.atTime(23, 59)).shift.toString()}"></p>
                                        </span>
                                </p>
                            </div>
                            <div class="uk-width-expand@m uk-flex uk-flex-middle">
                                <div class="full">
                                    <div data-uk-grid class="uk-grid-collapse">
                                        <div class="uk-width-1-1">
                                            <div data-uk-grid class="uk-grid-small">
                                                <div class="uk-width-auto">
                                                    <p class="need-approve">
                                                        Подано запит зміни робочого дня на
                                                        <span th:if="${userWorkDetailsService.getByUserBetweenTime(loggedUser, date.atTime(0, 0), date.atTime(23, 59)) == null}">
                                                            <p class="zmina zmina-0"> Не Працюю </p>
                                                        </span>
                                                        <span th:if="${userWorkDetailsService.getByUserBetweenTime(loggedUser, date.atTime(0, 0), date.atTime(23, 59)) != null}">
                                                            <p th:text="${userWorkDetailsService.getByUserBetweenTime(loggedUser, date.atTime(0, 0), date.atTime(23, 59)).shift.toString()}"></p>
                                                        </span>
                                                        <br>
                                                        Дані вступлять в силу після підтвердження Супервайзером.</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-1-1 uk-flex uk-flex-middle">
                                            <em class="grey">Робота відсутня</em>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-auto uk-flex uk-flex-middle">
                                <div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="uk-width-1-1">
            <a href="#" data-uk-toggle="target:.edit">Редагувати зміни роботи</a>
            <div id="modal-container" class="edit uk-modal-container" data-uk-modal="bg-close:false;">
                <div class="uk-modal-dialog uk-modal-body">
                    <button class="uk-modal-close-default" type="button" data-uk-close></button>
                    <form method="POST" action="http://localhost:8080/calendar" data-uk-grid class="uk-grid-small">
                        <div class="uk-width-1-1"><h3>Редагувати зміни роботи</h3></div>
                        <div class="uk-width-1-1">
                            <ul class="calendar calendar-2col">
                                <li>
                                    <div class="calendar-padding" th:each="date : ${dates}">
                                        <div data-uk-grid class="uk-grid-small uk-flex uk-flex-middle">
                                            <div class="uk-width-auto">
                                                <p class="date"><p th:text="${date.dayOfWeek.toString() + ' ' + date.dayOfMonth + ' ' + date.month.toString()}"></p>
                                            </div>
                                            <div class="uk-width-auto">
                                                <label class="input block">
                                                    <input th:name="zmina + ${String.valueOf(date.year) + String.valueOf(date.monthValue) + String.valueOf(date.dayOfMonth) + notWorking}" value="0" class="uk-radio" type="radio" checked>
                                                    Не працюю
                                                </label>
                                                <label class="input block">
                                                    <input th:name="zmina + ${String.valueOf(date.year) + String.valueOf(date.monthValue) + String.valueOf(date.dayOfMonth) + dayWorking}" value="1" class="uk-radio" type="radio" >
                                                    Денна зміна
                                                </label>
                                                <label class="input block">
                                                    <input th:name="zmina + ${String.valueOf(date.year) + String.valueOf(date.monthValue) + String.valueOf(date.dayOfMonth) + nightWorking}" value="2" class="uk-radio" type="radio" >
                                                    Нічна зміна
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="uk-width-auto@s">
                            <input name="id" th:value="${loggedUser.id}" type="text" hidden>
                            <input name="week" value="this" type="input" hidden>
                            <input name="type" value="edit" type="input" hidden>
                            <button class="uk-button uk-button-small uk-width-1-1 uk-width-auto@s" type="submit" name="submit" value="Submit">Оновити</button>
                        </div>
                        <div class="uk-width-auto@s">
                            <a href="#" data-uk-toggle="target:.edit" class="uk-button uk-button-small uk-button-grey uk-width-1-1 uk-width-auto@s" value="Submit">Відміна</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>
<footer class="footer-crm">
    2023 © Quality Work — In the right place At the right time</footer>
</body>
</html>